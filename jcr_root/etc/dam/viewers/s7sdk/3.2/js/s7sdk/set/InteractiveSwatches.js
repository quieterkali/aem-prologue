/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.set");b.Util.require("s7sdk.event.Event");b.Util.require("s7sdk.set.Swatches");b.Util.require("s7sdk.common.ItemDesc");if(!b.set.InteractiveSwatchesControl){b.set.InteractiveSwatchesControl=function(c){arguments.callee.superclass.apply(this,[c,b.set.InteractiveSwatchesControl.NS,c.constructor,b.set.InteractiveSwatches.RESTRICTED_STYLES])};b.set.InteractiveSwatchesControl.NS="s7sdk.set.InteractiveSwatchesControl";b.set.InteractiveSwatchesControl.prototype.rebuild=function(g){if(this.component){var e=this.component.interactiveDataProperties;var f=this.component.interactiveData;var c=this.component.globalMediaSet;var d=this.component.activeInteractiveDataIndex;this.superproto.rebuild.apply(this,[g]);this.component.setMediaSet(c);this.component.setInteractiveData(f,e);this.component.setActiveInteractiveDataIndex(d)}};b.set.InteractiveSwatchesControl.prototype.setModifier=function(g){var c;for(var f in g){var d=f.toLowerCase();if(d=="autoscroll"){value=g[f];if(value){var e=true;prevVal=(this.component.autoScroll?"1":"0");e=parseInt(value)!=0;this.component.autoScroll=e;this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getId(),oldvalue:prevVal,newvalue:(e?"1":"0"),property:d},false))}}else{if(d=="displaymode"){value=g[f];if(value){c=c||{};c[f]=(value.toLowerCase()=="continuous"?"continuous":"segment")}}else{c=c||{};c[f]=g[f]}}}if(c){this.superclass.prototype.setModifier.apply(this,[c])}}}b.Class.inherits(b.set.InteractiveSwatchesControl.NS,"s7sdk.ControlComponent");if(!b.set.InteractiveSwatches){b.set.InteractiveSwatches=function InteractiveSwatches(c,f,e){b.Logger.log(b.Logger.CONFIG,"s7sdk.set.InteractiveSwatches constructor - container: %0, settings: %1 , compId: %2",c,f,e);var i=!!arguments[3];e=(typeof e=="string"&&e.length)?e:"InteractiveSwatches_"+b.Util.createUniqueId();arguments.callee.superclass.apply(this,[e,c,"div","s7interactiveswatches",f,!i]);var d=this;this.interactiveDataProperties=null;this.interactiveData=null;this.enableInteractiveData=false;this.activeInteractiveDataIndex=-1;this.suppressVisibleSwatchesNotification=false;this.swatchIndexLookup=null;this.globalMediaSet=null;this.createElement();this.attachToContainer();this.innerSwatches=new b.Swatches(e,f,e+"_swatches",true);this.innerSwatches.serverUrl=this.serverUrl;this.innerSwatches.iscommand=this.iscommand;this.innerSwatches.maxloadradius=this.maxloadradius;this.innerSwatches.textPos=this.textPos;this.innerSwatches.scrollStep.hStep=this.scrollStep;this.innerSwatches.scrollStep.vStep=this.scrollStep;this.innerSwatches.enableDragging=this.enableDragging;this.innerSwatches.direction=this.direction;this.innerSwatches.fmt=this.fmt;this.innerSwatches.orientation=1;this.innerSwatches.enableScrollButtons=false;this.innerSwatches.resizable=false;this.locale=this.getParam("locale","");this.dir=this.direction=="auto"?this.locale=="ja":this.direction!="left";this.swatchSelectedHandler=function(l){b.Logger.log(b.Logger.FINE,"Swatch[%0] selected",l.s7event.frame);var k=g.innerSwatches.currentSwatch_;d.interactiveClickHandler(l,k)};this.innerSwatches.tmbLayout={cols:1,rows:0};var h=parseInt(b.Util.css.getCss("s7interactiveswatches","width",e,null,this.getParent()));var j=parseInt(b.Util.css.getCss("s7interactiveswatches","height",e,null,this.getParent()));this.resize(h,j);this.container=this.getParent();this.banner=null;this.bannerSize={w:parseInt(b.Util.css.getCss("s7banner","width",this.id,"s7interactiveswatches",this.container)),h:parseInt(b.Util.css.getCss("s7banner","height",this.id,"s7interactiveswatches",this.container))};this.leftButton_=null;this.rightButton_=null;this.upButton_=null;this.downButton_=null;this.verticalButtonSize={w:Math.max.apply(null,[["s7scrollupbutton","width"],["s7scrolldownbutton","width"]].map(function(k){return parseInt(b.Util.css.getCss(k[0],k[1],this.id,"s7interactiveswatches",this.container))},this))||0,h:Math.max.apply(null,[["s7scrollupbutton","height"],["s7scrolldownbutton","height"]].map(function(k){return parseInt(b.Util.css.getCss(k[0],k[1],this.id,"s7interactiveswatches",this.container))},this))||0};this.horizontalButtonSize={w:Math.max.apply(null,[["s7scrollleftbutton","width"],["s7scrollrightbutton","width"]].map(function(k){return parseInt(b.Util.css.getCss(k[0],k[1],this.id,"s7interactiveswatches",this.container))},this))||0,h:Math.max.apply(null,[["s7scrollleftbutton","height"],["s7scrollrightbutton","height"]].map(function(k){return parseInt(b.Util.css.getCss(k[0],k[1],this.id,"s7interactiveswatches",this.container))},this))||0};var g=this;if(!i){return new b.set.InteractiveSwatchesControl(this)}else{return this}};b.Class.inherits("s7sdk.set.InteractiveSwatches","s7sdk.UIComponent");b.set.InteractiveSwatches.prototype.symbols={BANNER:"Click to View"};b.set.InteractiveSwatches.prototype.modifiers={serverUrl:{params:["isRootPath"],defaults:["/is/image/"]},iscommand:{params:["value"],defaults:[""],parseParams:false},maxloadradius:{params:["value"],defaults:[1],ranges:["-1:"]},textPos:{params:["textpos"],defaults:["bottom"],ranges:[["bottom","top","left","right","tooltip","none"]]},autoScroll:{params:["enabled"],defaults:[true]},displayMode:{params:["value"],defaults:["segment"],ranges:[["continuous","segment"]]},enableScrollButtons:{params:["enabled"],defaults:[true]},scrollStep:{params:["step"],defaults:[3],ranges:["1:"]},enableDragging:{params:["enabled","overdragvalue"],defaults:[true,0.5],ranges:[,"0:1"]},direction:{params:["direction"],defaults:["auto"],ranges:[["auto","left","right"]]},fmt:{params:["fmt"],defaults:["jpg"],ranges:[["jpg","jpeg","png","png-alpha","gif","gif-alpha"]]}};b.set.InteractiveSwatches.BTN_LEFT_SIDE="leftSide";b.set.InteractiveSwatches.BTN_RIGHT_SIDE="rightSide";b.set.InteractiveSwatches.BTN_TOP_SIDE="topSide";b.set.InteractiveSwatches.BTN_BOTTOM_SIDE="bottomSide";b.set.InteractiveSwatches.BTN_CENTER="center";b.set.InteractiveSwatches.RESTRICTED_STYLES={s7interactiveswatches:["width","height"],"s7interactiveswatches s7swatches s7thumb":["width","height"],"s7interactiveswatches s7swatches s7thumbcell":["margin-left","margin-right","margin-top","margin-bottom","margin"],"s7interactiveswatches s7swatches s7label":["font-family","font-size","font-style"]};b.set.InteractiveSwatches.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(b.set.InteractiveSwatches.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superproto.setCSS.apply(this,[e,d,c])}};b.set.InteractiveSwatches.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (InteractiveSwatches) is unsupported! Please refer to SDK documentation on using setModifier.")};b.set.InteractiveSwatches.prototype.setMediaSet=function(c){b.Logger.log(b.Logger.FINE,"s7sdk.set.InteractiveSwatches.setMediaSet - mediaSet: %0, type: %1",c,c?c.type:"");this.globalMediaSet=c};b.set.InteractiveSwatches.prototype.cleanUp=function(){this.globalMediaSet=null;this.interactiveDataProperties=null;this.interactiveData=null;this.innerSwatches.removeEventListener(b.event.AssetEvent.SWATCH_SELECTED_EVENT,this.swatchSelectedHandler);this.innerSwatches.dispose();b.Util.removeTags(this.obj);this.obj.style.cssText=""};b.set.InteractiveSwatches.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};b.set.InteractiveSwatches.prototype.setInteractiveData=function(c,d){b.Logger.log(b.Logger.CONFIG,"InteractiveSwatches.setInteractiveData: %0, properties: %1",c,d);this.interactiveDataProperties=d;this.interactiveData=c;this.enableInteractiveData=!!this.interactiveData;this.applyInteractiveData(c,d)};b.set.InteractiveSwatches.prototype.applyInteractiveData=function(c,e){b.Logger.log(b.Logger.CONFIG,"InteractiveSwatches.applyInteractiveData: %0, properties: %1",c,e);this.applyInteractiveData_(c,e);if(this.visibleSwatches&&this.displayMode=="segment"&&c){for(var d=0;d<c.length;d++){var f=c[d];if(f.swatches&&f.swatches.item&&f.swatches.item.length<this.visibleSwatches){this.suppressVisibleSwatchesNotification=true;this.applyInteractiveData_(c,e);this.suppressVisibleSwatchesNotification=false;return}}}};b.set.InteractiveSwatches.prototype.applyInteractiveData_=function(d,e){if(d){var c=this.createInteractiveMediaSet(d);if(c){this.innerSwatches.setMediaSet(c);this.build();return}}};b.set.InteractiveSwatches.prototype.build=function(){if(this.banner&&this.banner.parentNode){this.banner.parentNode.removeChild(this.banner)}c(this.leftButton_);c(this.rightButton_);c(this.upButton_);c(this.downButton_);function c(d){if(d&&d.obj&&d.obj.parentNode){d.obj.parentNode.removeChild(d.obj)}}this.attachToContainer();if(this.interactiveData&&this.interactiveData.length&&this.swatchIndexLookup&&this.swatchIndexLookup.length>0){this.layoutSwatches();if(this.activeInteractiveDataIndex!=-1){this.setActiveInteractiveDataIndex(this.activeInteractiveDataIndex,true)}}else{this.innerSwatches.resize(this.getWidth(),this.getHeight())}this.innerSwatches.addEventListener(b.event.AssetEvent.SWATCH_SELECTED_EVENT,this.swatchSelectedHandler)};b.set.InteractiveSwatches.prototype.layoutSwatches=function(){if(this.totalWidth_&&this.totalHeight_&&this.totalWidth_>this.totalHeight_){this.innerSwatches.tmbLayout={cols:0,rows:1}}else{this.innerSwatches.tmbLayout={cols:1,rows:0}}var d=new b.Rectangle(0,0,this.getWidth(),this.getHeight());b.Logger.log(b.Logger.FINE,"InteractiveSwatches banner: initial placement rect: (%0,%1) %2x%3",d.x,d.y,d.width,d.height);d=this.layoutBanner(d);b.Logger.log(b.Logger.FINE,"InteractiveSwatches banner: after banner placement rect: (%0,%1) %2x%3",d.x,d.y,d.width,d.height);d=this.layoutButtons(d);b.Logger.log(b.Logger.FINE,"InteractiveSwatches banner: after scroll buttons placement rect: (%0,%1) %2x%3",d.x,d.y,d.width,d.height);this.innerSwatches.resize(d.width,d.height);this.innerSwatches.obj.style.left=d.x+"px";this.innerSwatches.obj.style.top=d.y+"px";this.innerSwatches.toggleLeftButton=this.toggleLeftButton.bind(this);this.innerSwatches.toggleRightButton=this.toggleRightButton.bind(this);this.innerSwatches.toggleUpButton=this.toggleUpButton.bind(this);this.innerSwatches.toggleDownButton=this.toggleDownButton.bind(this);this.visibleSwatches=Math.max(this.innerSwatches.fitRows_,this.innerSwatches.fitCols_);if(!this.suppressVisibleSwatchesNotification){var c=new b.event.InteractiveSwatchesEvent(b.event.InteractiveSwatchesEvent.NOTF_VISIBLE_INTERACTIVE_SWATCHES,null,this.visibleSwatches,false);this.dispatchEvent(c)}};b.set.InteractiveSwatches.prototype.getInteractiveData=function(){return this.interactiveData};b.set.InteractiveSwatches.prototype.getInteractiveDataProperties=function(){return this.interactiveDataProperties};b.set.InteractiveSwatches.prototype.createInteractiveMediaSet=function(j){if(!j){return null}function c(k,i){if(k&&k instanceof Object){return k[i]}return null}var q=new b.MediaSetDesc();var h;var n="wid="+this.innerSwatches.tmbSize.width+"&hei="+this.innerSwatches.tmbSize.height;function l(r){var k;if(r){var i=b.set.InteractiveSwatches.parseSwatch(r,h,n);k=new b.ImageDesc(this.globalMediaSet,b.ItemDescType.IMG,r.s.n,i,r.dx,r.dy,h,r.s.isDefault,r.s.mod,r.s.pmod,r.s.l,null,null,null,true,false,true)}else{k=b.ImageDesc.createEmptyImageDesc(this.globalMediaSet,null,null)}q.items.push(k)}this.swatchIndexLookup=[];for(var f=0,m=0;f<j.length;f++){var p=j[f];var d=c(c(p,"swatches"),"item");if(d){if(b.Util.isArray(d)){for(var e=0;e<d.length;e+=1,m+=1){var o=d[e];b.Logger.log(b.Logger.FINE,"swatches[%0][%1]: %2",f,e,o.s.l);l(o);this.swatchIndexLookup.push(m)}if(this.displayMode=="segment"&&this.visibleSwatches&&this.visibleSwatches>d.length){b.Logger.log(b.Logger.FINE,"Add %0 empty swatches to segment %1",this.visibleSwatches-d.length,f);for(var g=d.length;g<this.visibleSwatches;g++,m+=1){l(null)}}}}}return q};b.set.InteractiveSwatches.prototype.getWidth=function(){return this.totalWidth_};b.set.InteractiveSwatches.prototype.getHeight=function(){return this.totalHeight_};b.set.InteractiveSwatches.prototype.resize=function(c,f){b.Logger.log(b.Logger.FINE,"s7sdk.set.InteractiveSwatches.resize - width: %0, height: %1",c,f);var j=null;if(this.innerSwatches&&this.innerSwatches.swatchGroup_){j=new b.Point2D(this.innerSwatches.swatchGroup_.getX(),this.innerSwatches.swatchGroup_.getY())}this.totalWidth_=c;this.totalHeight_=f;this.obj.style.width=c+"px";this.obj.style.height=f+"px";var d=this.visibleSwatches;this.build();if(!this.autoScroll&&j){this.innerSwatches.swatchGroup_.slideToImmediately(j);this.innerSwatches.swatchGroup_.positionOvershootToEdge()}if(this.visibleSwatches&&this.visibleSwatches!=d&&this.displayMode=="segment"&&this.interactiveData){for(var e=0;e<this.interactiveData.length;e++){var g=this.interactiveData[e];if(g.swatches&&g.swatches.item&&g.swatches.item.length<this.visibleSwatches){this.suppressVisibleSwatchesNotification=true;this.applyInteractiveData_(this.interactiveData,this.interactiveDataProperties);this.suppressVisibleSwatchesNotification=false;break}}}b.UIComponent.prototype.resize.apply(this,[c,f])};b.set.InteractiveSwatches.prototype.addEventListener=function(e,d,c){b.Logger.log(b.Logger.FINE,"s7sdk.set.InteractiveSwatches.addEventListener - type: %0, handler: %1, useCapture: %2",e,d.toString().substring(0,d.toString().indexOf("(")),c);this.superproto.addEventListener.apply(this,[e,d,c])};b.set.InteractiveSwatches.prototype.layoutBanner=function(c){this.banner=b.Util.createObj("banner","div",null,"s7banner");var d=this.getLocalizedText("BANNER");this.banner.innerHTML=d;return this.placeBanner(this.banner,c,b.set.InteractiveSwatches.BTN_TOP_SIDE,b.set.InteractiveSwatches.BTN_CENTER,this.bannerSize)};b.set.InteractiveSwatches.prototype.placeBanner=function(k,i,m,j,h){this.obj.appendChild(k);var n=this;var f=["top","bottom","left","right"];var d=f.map(function(p){return Math.ceil(parseFloat(b.Util.css.getCss("s7banner","padding-"+p,n.id,"s7interactiveswatches",n.container)))});b.Logger.log(b.Logger.FINE,"InteractiveSwatches banner padding (px): t=%0, b=%1, l=%2, r=%3",d[0],d[1],d[2],d[3]);var l=f.map(function(p){return Math.ceil(parseFloat(b.Util.css.getCss("s7banner","border-"+p+"-width",n.id,"s7interactiveswatches",n.container)))});b.Logger.log(b.Logger.FINE,"InteractiveSwatches banner border width (px): t=%0, b=%1, l=%2, r=%3",l[0],l[1],l[2],l[3]);var e=b.browser&&b.browser.name=="ie"&&(b.browser.version.major<6&&b.browser.version.minor<=5);b.Logger.log(b.Logger.FINE,"InteractiveSwatches pre IE 5.5: %0",e);k.style.width=((e)?h.w:h.w-l[2]-l[3])+"px";var o=l[0]+l[1];var g=l[2]+l[3];h.h=k.clientHeight-d[0]-d[1];k.style.height=h.h+"px";b.Logger.log(b.Logger.FINE,"InteractiveSwatches banner clientHeight (px): %0, height: %1",k.clientHeight,h.h);if(e){o=k.clientHeight;g=k.clientWidth}else{o+=k.clientHeight;g+=k.clientWidth}var c=new b.Rectangle(i.x,i.y,i.width,i.height-o);switch(j){case b.InteractiveSwatches.BTN_LEFT_SIDE:k.style.left=i.x+"px";break;case b.InteractiveSwatches.BTN_RIGHT_SIDE:k.style.left=(i.getRight()-g)+"px";break;case b.InteractiveSwatches.BANNER_CENTER:default:k.style.left=((i.width-g)/2)+"px";break}switch(m){case b.InteractiveSwatches.BTN_TOP_SIDE:k.style.top=i.y+"px";c.y+=o;break;case b.InteractiveSwatches.BTN_BOTTOM_SIDE:k.style.top=(i.getBottom()-o)+"px";break}return c};b.set.InteractiveSwatches.prototype.placeButton=function(d,f,h,e,c){var g=new b.Rectangle(0,0,c.w,c.h);switch(e){case b.InteractiveSwatches.BTN_LEFT_SIDE:d.x=f.x;break;case b.InteractiveSwatches.BTN_RIGHT_SIDE:d.x=f.getRight()-g.width;break}switch(h){case b.InteractiveSwatches.BTN_TOP_SIDE:d.y=f.y;break;case b.InteractiveSwatches.BTN_BOTTOM_SIDE:d.y=f.getBottom()-g.height;break}d.getObj().style.position="absolute";d.getObj().style.left=d.x+"px";d.getObj().style.top=d.y+"px"};b.set.InteractiveSwatches.prototype.layoutButtons=function(d){if(this.enableScrollButtons){if(this.innerSwatches.tmbLayout.rows==1){this.leftButton_=new b.ScrollLeftButton(this.obj.id,this.settings,"leftButton_"+b.Util.createUniqueId(),true);this.rightButton_=new b.ScrollRightButton(this.obj.id,this.settings,"rightButton_"+b.Util.createUniqueId(),true);var f=this.dir?b.set.InteractiveSwatches.BTN_LEFT_SIDE:b.set.InteractiveSwatches.BTN_RIGHT_SIDE;this.placeButton(this.leftButton_,d,b.set.InteractiveSwatches.BTN_TOP_SIDE,f,this.horizontalButtonSize);this.placeButton(this.rightButton_,d,b.set.InteractiveSwatches.BTN_BOTTOM_SIDE,f,this.horizontalButtonSize);var c=this;b.Event.addDOMListener(this.leftButton_,"mouseup",function(g){g=g||window.event;c.buttonClick(g,c.leftButton_)});b.Event.addDOMListener(this.leftButton_,"touchend",function(g){g=g||window.event;c.buttonClick(g,c.leftButton_)});b.Event.addDOMListener(this.rightButton_,"mouseup",function(g){g=g||window.event;c.buttonClick(g,c.rightButton_)});b.Event.addDOMListener(this.rightButton_,"touchend",function(g){g=g||window.event;c.buttonClick(g,c.rightButton_)});d.width-=this.horizontalButtonSize.w;d.x+=this.dir?this.horizontalButtonSize.w:0}else{this.upButton_=new b.ScrollUpButton(this.obj.id,this.settings,"upButton_"+b.Util.createUniqueId(),true);this.downButton_=new b.ScrollDownButton(this.obj.id,this.settings,"downButton_"+b.Util.createUniqueId(),true);var e=b.set.InteractiveSwatches.BTN_BOTTOM_SIDE;this.placeButton(this.upButton_,d,e,b.set.InteractiveSwatches.BTN_LEFT_SIDE,this.verticalButtonSize);this.placeButton(this.downButton_,d,e,b.set.InteractiveSwatches.BTN_RIGHT_SIDE,this.verticalButtonSize);var c=this;b.Event.addDOMListener(this.upButton_,"mouseup",function(g){g=g||window.event;c.buttonClick(g,c.upButton_)});b.Event.addDOMListener(this.upButton_,"touchend",function(g){g=g||window.event;c.buttonClick(g,c.upButton_)});b.Event.addDOMListener(this.downButton_,"mouseup",function(g){g=g||window.event;c.buttonClick(g,c.downButton_)});b.Event.addDOMListener(this.downButton_,"touchend",function(g){g=g||window.event;c.buttonClick(g,c.downButton_)});d.height-=this.verticalButtonSize.h}}return d};b.set.InteractiveSwatches.prototype.buttonClick=function(d,c){if(c===this.leftButton_){this.innerSwatches.buttonClick_("left")}if(c===this.rightButton_){this.innerSwatches.buttonClick_("right")}if(c===this.upButton_){this.innerSwatches.buttonClick_("up")}if(c===this.downButton_){this.innerSwatches.buttonClick_("down")}};b.set.InteractiveSwatches.prototype.toggleLeftButton=function(c){if(this.leftButton_){c?this.leftButton_.activate():this.leftButton_.deactivate()}};b.set.InteractiveSwatches.prototype.toggleRightButton=function(c){if(this.rightButton_){c?this.rightButton_.activate():this.rightButton_.deactivate()}};b.set.InteractiveSwatches.prototype.toggleUpButton=function(c){if(this.upButton_){c?this.upButton_.activate():this.upButton_.deactivate()}};b.set.InteractiveSwatches.prototype.toggleDownButton=function(c){if(this.downButton_){c?this.downButton_.activate():this.downButton_.deactivate()}};b.set.InteractiveSwatches.prototype.setActiveInteractiveDataIndex=function(e,d){this.activeInteractiveDataIndex=e;if(!this.autoScroll){b.Logger.log(b.Logger.FINE,"InteractiveSwatches autoScroll disabled");return}if(e==-1||!this.interactiveData||!this.swatchIndexLookup||this.swatchIndexLookup.length<=0){return}var c=e;if(this.swatchIndexLookup&&this.swatchIndexLookup.length>e){c=this.swatchIndexLookup[e]}else{b.Logger.log(b.Logger.SEVERE,"Invalid swatch  active swatch index %0",e)}this.innerSwatches.displaySwatch(this.innerSwatches.swatches_[c],true,d)};b.set.InteractiveSwatches.prototype.interactiveClickHandler=function(d,n){d.preventDefault();d.stopPropagation();var o=n.item;if(!o){b.Logger.log(b.Logger.WARNING,"Invalid swatch item");return}this.innerSwatches.selectSwatch(-1);b.Logger.log(b.Logger.FINE,"InteractiveSwatches click handler: href=%0, target=%1",o.href,o.target);if(o.href&&o.href.length>0){var k=o.href.toLowerCase();if(k.indexOf("quickview:")==0){var c=new Object();var r=o.href;var p=/^QUICKVIEW:(.+)$/gi;var h=p.exec(r);var g=(h!=null&&h.length==2?h[1]:"");var q=g.split("&");for(var f=0;f<q.length;f++){var e=q[f].split("=");if(e.length>1){c[e[0]]=decodeURIComponent(q[f].split("=")[1])}}var m=new b.event.InteractiveSwatchesEvent(b.event.InteractiveSwatchesEvent.SWATCH_QUICKVIEW_ACTIVATED,o.href,c,false);this.dispatchEvent(m)}else{if(k.indexOf("javascript:")==0){b.Logger.log(b.Logger.INFO,"Javascript is disabled")}else{var m=new b.event.InteractiveSwatchesEvent(b.event.InteractiveSwatchesEvent.SWATCH_URL_ACTIVATED,o.href,null,false);this.dispatchEvent(m);this.evaluateWebLink_(o.href,o.target)}}}else{}var l=this.getHREF(n.item);var j=new b.event.UserEvent(b.event.UserEvent.INTERACTIVE_SWATCH,[l],true);this.dispatchEvent(j)};b.set.InteractiveSwatches.prototype.getHREF=function(c){if(c.href&&c.href.length){return c.href}return""};b.set.InteractiveSwatches.prototype.evaluateWebLink_=function(c,d){window.open(c,d||"_self")};b.set.InteractiveSwatches.parseSwatch=function(d,c,e){if(d.s&&d.s.n!=undefined){name=d.s.n;if(e&&e.length>0){name+=(name.indexOf("?")==-1)?"?":"&";name+=e}return new b.InteractiveSwatchDesc(name,d.s.c,d.s.l,c,d.s.mod,d.s.pmod,d.s.href,d.s.target)}return null};b.InteractiveSwatches=b.set.InteractiveSwatches;(function a(){var i=b.Util.css.createCssRuleText;var f=b.Util.css.createCssImgUrlText;var g=b.browser&&b.browser.name=="ie"&&b.browser.version.major<=8;var e=b.browser&&b.browser.name=="ie"&&b.browser.version.major>=10;var h={display:"block",position:"absolute",top:"0px",left:"0px",width:"50px",height:"28px"};var c={display:"block",position:"absolute",top:"0px",left:"0px",width:"28px",height:"50px"};var d=i(".s7interactiveswatches",{"background-color":g?"rgb(224, 224, 224)":"rgba(100, 100, 100, 0.2)","z-index":"0","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-ms-touch-action":e?"none":"","touch-action":e?"none":"",position:"absolute",width:"100px",height:"500px"})+i(".s7interactiveswatches .s7banner",{"background-color":g?"rgb(224, 224, 224)":"rgba(100, 100, 100, 0.2)",position:"absolute",width:"100%","box-sizing":"content-box","font-family":"Helvetica, sans-serif","font-size":"12px"})+i(".s7interactiveswatches .s7swatches",{"background-color":g?"rgb(224, 224, 224)":"rgba(100, 100, 100, 0.2)","z-index":"1",width:"100%",height:"100%"})+i(".s7interactiveswatches .s7swatches .s7thumbcell",{margin:"5px"})+i(".s7interactiveswatches .s7swatches .s7thumbcell[type='none']",{border:"none !important","background-color":"transparent !important","pointer-events":"none !important"})+i(".s7interactiveswatches .s7swatches .s7thumb",{border:"1px solid transparent",width:"75px",height:"75px"})+i(".s7interactiveswatches .s7swatches .s7thumb[state='selected']",{border:"1px solid #FFFFFF"})+i(".s7interactiveswatches .s7swatches .s7label",{"font-family":"Helvetica, sans-serif","font-size":"12px"})+i(".s7interactiveswatches .s7scrollleftbutton",c)+i(".s7interactiveswatches .s7scrollleftbutton[state='up']",{"background-image":f("interactive_scroll_left_up.png")})+i(".s7interactiveswatches .s7scrollleftbutton[state='over']",{"background-image":f("interactive_scroll_left_over.png")})+i(".s7interactiveswatches .s7scrollleftbutton[state='down']",{"background-image":f("interactive_scroll_left_down.png")})+i(".s7interactiveswatches .s7scrollleftbutton[state='disabled']",{"background-image":f("interactive_scroll_left_disabled.png")})+i(".s7interactiveswatches .s7scrollrightbutton",c)+i(".s7interactiveswatches .s7scrollrightbutton[state='up']",{"background-image":f("interactive_scroll_right_up.png")})+i(".s7interactiveswatches .s7scrollrightbutton[state='over']",{"background-image":f("interactive_scroll_right_over.png")})+i(".s7interactiveswatches .s7scrollrightbutton[state='down']",{"background-image":f("interactive_scroll_right_down.png")})+i(".s7interactiveswatches .s7scrollrightbutton[state='disabled']",{"background-image":f("interactive_scroll_right_disabled.png")})+i(".s7interactiveswatches .s7scrollupbutton",h)+i(".s7interactiveswatches .s7scrollupbutton[state='up']",{"background-image":f("interactive_scroll_up_up.png")})+i(".s7interactiveswatches .s7scrollupbutton[state='over']",{"background-image":f("interactive_scroll_up_over.png")})+i(".s7interactiveswatches .s7scrollupbutton[state='down']",{"background-image":f("interactive_scroll_up_down.png")})+i(".s7interactiveswatches .s7scrollupbutton[state='disabled']",{"background-image":f("interactive_scroll_up_disabled.png")})+i(".s7interactiveswatches .s7scrolldownbutton",h)+i(".s7interactiveswatches .s7scrolldownbutton[state='up']",{"background-image":f("interactive_scroll_down_up.png")})+i(".s7interactiveswatches .s7scrolldownbutton[state='over']",{"background-image":f("interactive_scroll_down_over.png")})+i(".s7interactiveswatches .s7scrolldownbutton[state='down']",{"background-image":f("interactive_scroll_down_down.png")})+i(".s7interactiveswatches .s7scrolldownbutton[state='disabled']",{"background-image":f("interactive_scroll_down_disabled.png")});b.Util.css.addDefaultCSS(d,"InteractiveSwatches")})()}})(s7getCurrentNameSpace());