/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.pkg("s7sdk.model");a.Util.require("s7sdk.css.Property");a.Util.require("s7sdk.model.PropertyModel")}(s7getCurrentNameSpace()));(function(a){if(!a.StyleModel){a.StyleModel=(function(){var m={swatches:{style:{selectors:{s7swatches:{name:"Body",models:[{model:"CSSSizeModel",config:{}},{model:"CSSBackgroundModel",config:{"background-repeat":{hide:false},"background-size":{hide:false}}},{model:"CSSBoxShadowModel",config:{}}],selectors:{s7thumb:{name:"Thumb Style",models:[{model:"CSSSizeModel",config:{}},{model:"CSSBackgroundModel",config:{"background-image":{hide:true}}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{"border-width":{max:2}}}]}}}}}},interactiveswatches:{style:{selectors:{"s7interactiveswatches .s7swatches":{name:"Body",models:[{model:"CSSSizeModel",config:{}},{model:"CSSBackgroundModel",config:{"background-repeat":{hide:false},"background-size":{hide:false}}},{model:"CSSBoxShadowModel",config:{}}],selectors:{s7thumb:{name:"Thumb Style",models:[{model:"CSSSizeModel",config:{}},{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}}]}}}}}},socialshare:{style:{selectors:{"s7socialshare .s7button.s7socialbutton[state]":{name:"Layout",models:[{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},linkshare:{style:{selectors:{"s7button.s7linkshare[state]":{name:"Layout",models:[{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},facebookshare:{style:{selectors:{"s7button.s7facebookshare[state]":{name:"Layout",models:[{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},twittershare:{style:{selectors:{"s7button.s7twittershare[state]":{name:"Layout",models:[{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},panleftbutton:{style:{selectors:{"s7button.s7panleftbutton[state]":{name:"Layout",models:[{model:"CSSPositionModel",config:{}},{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},panrightbutton:{style:{selectors:{"s7button.s7panrightbutton[state]":{name:"Layout",models:[{model:"CSSPositionModel",config:{}},{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},setindicator:{style:{selectors:{s7setindicator:{name:"Set Body",models:[{model:"CSSPositionModel",config:{}}]},"s7setindicator[mode='dotted']":{name:"Dotted Body",models:[],selectors:{s7dot:{name:"Dot Layout",models:[],selectors:{"[state]":{name:"Dotted Style",values:["selected","unselected"],models:[{model:"CSSSizeModel",config:{width:{max:150},height:{max:150}}},{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}},"s7setindicator[mode='numeric']":{name:"Numeric Body",models:[],selectors:{s7dot:{name:"Numeric Layout",models:[],selectors:{"[state]":{name:"Numeric Style",values:["selected","unselected"],models:[{model:"CSSSizeModel",config:{width:{max:150},height:{max:150}}},{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}}}},imagemapeffect:{style:{selectors:{s7imagemapeffect:{name:"ImageMapEffect",models:[],selectors:{s7icon:{name:"Icon",models:[],selectors:{"[state]":{name:"Icon",values:["default","active"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}},s7region:{name:"Region",models:[{model:"CSSBackgroundModel",config:{"background-repeat":{hide:false},"background-size":{hide:false}}},{model:"CSSBorderModel",config:{}}],}}}}}},zoominbutton:{style:{selectors:{"s7button.s7zoominbutton[state]":{name:"Layout",models:[{model:"CSSPositionModel",config:{}},{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},zoomoutbutton:{style:{selectors:{"s7button.s7zoomoutbutton[state]":{name:"Layout",models:[{model:"CSSPositionModel",config:{}},{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},zoomresetbutton:{style:{selectors:{"s7button.s7zoomresetbutton[state]":{name:"Layout",models:[{model:"CSSPositionModel",config:{}},{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}},fullscreenbutton:{style:{selectors:{"s7button.s7fullscreenbutton[state]":{name:"Layout",models:[{model:"CSSPositionModel",config:{}},{model:"CSSSpriteModel",config:{}}],selectors:{"[state]":{name:"Style",values:["up","over","down","disabled"],models:[{model:"CSSBackgroundModel",config:{}},{model:"CSSBoxShadowModel",config:{}},{model:"CSSBorderModel",config:{}}]}}}}}}};function f(q,o){var p=[];q.forEach(function(t){var u=String(t.model),r=a.model[u],s;if(r instanceof Function){s=new r(o,t.config,t.metadata);p.push(s)}else{throw new Error("Invalid model class declared: "+u)}});return p}function n(o){return(o.match(/_(?:.(?!_))+$/)||[])[0]}function e(o){return h(o).displayName||o.getClassName()}function c(o){var q=h(o),p=(q&&q.style&&q.style.tip)||"";return p}function h(p){var o=(p.getClassName()||"").toLowerCase(),q=n(p.getId()||"");return m[q]||m[o]}function i(o,p){o.forEach(function(q){p.propertyModels.push(q);q.addPropertyListeners(p.propertyModelChanged.bind(p))})}function l(o){var p=o.match(/^\[([a-zA-Z0-9]*)\]/)||[];return p[1]}function b(p,u,r){r=r||new a.model.SelectorModel.Specificity(0,0,0);var t=h(p),q;function s(w,v){d(w,function(x,z){var C=x.models,y=x.name,A=l(z),D=x.tip||"",F=x.values||[],B=x.metadata||{};if(A){F.forEach(function(I){var H=new a.model.AttributeSelectorModel(y,p,v,a.model.SelectorModel.SEQUENCE,B,A,I);G(H)})}else{var E=new a.model.ClassSelectorModel(y,p,v,a.model.SelectorModel.COMBINATOR_DESCENDANT,B,z);G(E)}function G(I){if(!v){q=I;I.addSpecificity(r)}I.sdkClassName=x.sdkClassName||"";I.setTip(D);var H=f(C,I);i(H,I);if(x.selectors){s(x.selectors,I)}}})}var o=g(u,p);if(t&&t.style&&t.style.selectors){s(t.style.selectors,o)}return o}function g(q,p){var r=q.split("."),o;r.shift();r.forEach(function(s){o=new a.model.ClassSelectorModel("Marker",p,o,a.model.SelectorModel.SEQUENCE,{},s)});return o}function k(r,q){var p=j(q);var o=j(r);d(p,function(s,t){var u=o[t];u.addPropertyListener("*",s.lowerSpecificitySelectorModelChanged.bind(s))})}function j(p){var o={};function q(r){o[r.toFullSelectorString()]=r;r.childNodes.forEach(function(s){q(s)})}q(p);return o}function d(o,q){for(var p in o){if(o.hasOwnProperty(p)){q(o[p],p)}}}return{descriptors:m,buildComponentModel:b,linkModelChains:k,getComponentDisplayName:e,getDescriptorForComponent:h,getComponentTip:c}}())}}(s7getCurrentNameSpace()));(function(a){if(!a.model.SelectorModel){a.model.SelectorModel=function d(h,g,f,j,i){a.model.SelectorModel.superclass.apply(this,[]);this.propertyModels=[];this.name=h;this.parentModel=f;this.combinator=j;this.childNodes=[];this.specificity=new a.model.SelectorModel.Specificity(0,0,0);this.parsedCSS=null;this.sdkClassName="";this.tip="";this.metadata=i||{};if(g){this.setComponent(g)}if(f){f.addChildNode(this)}};a.Class.inherits("s7sdk.model.SelectorModel","s7sdk.Observable");a.model.SelectorModel.SEQUENCE="";a.model.SelectorModel.COMBINATOR_DESCENDANT=" ";a.model.SelectorModel.COMBINATOR_CHILD=">";a.model.SelectorModel.COMBINATOR_ADJACENT="+";a.model.SelectorModel.COMBINATOR_SIBLING="~";a.model.SelectorModel.globalPropertyPipe=function(g,f,h){};a.model.SelectorModel.prototype.getMetadata=function(){return this.metadata};a.model.SelectorModel.prototype.setComponent=function(f){this.component=f;this.componentName=this.component.getClassName().toLowerCase()};a.model.SelectorModel.prototype.getSpecificity=function(){return this.specificity};a.model.SelectorModel.prototype.setSpecificity=function(f){this.specificity=f};a.model.SelectorModel.prototype.addSpecificity=function(f){this.specificity=this.specificity.add(f)};a.model.SelectorModel.prototype.getFullSpecificity=function(){return this.getSelectorChain().reduce(function(f,g){return f.add(g.getSpecificity())},new a.model.SelectorModel.Specificity(0,0,0))};a.model.SelectorModel.prototype.setTip=function(f){this.tip=f};a.model.SelectorModel.prototype.getTip=function(){return this.tip};a.model.SelectorModel.prototype.toSelectorString=function(){return""};a.model.SelectorModel.prototype.toFullSelectorString=function(f){return this.getSelectorChain().reduce(function(g,h){return String(g+(f||(!f&&h.name!="Marker")?h.toSelectorString():""))},"").trim()};a.model.SelectorModel.prototype.getRootSelectorModel=function(){return this.getSelectorChain().shift()};a.model.SelectorModel.prototype.getSelectorChain=function(){var g=[],f=this;do{g.unshift(f)}while(f=f.parentModel);return g};a.model.SelectorModel.prototype.traverseTree=function(f){function g(h){f(h);h.childNodes.forEach(function(i){g(i)})}g(this)};a.model.SelectorModel.prototype.getParsedCSS=function(){return this.parsedCSS};a.model.SelectorModel.prototype.setParsedCSS=function(f){this.parsedCSS=f};a.model.SelectorModel.prototype.initPropertyModels=function(){this.properties={};this.propertyModels.forEach(function f(g){g.initProperties();g.notifyAll()})};a.model.SelectorModel.applyComponentToChain=function(f,g){g.traverseTree(function(h){h.setComponent(f)})};a.model.SelectorModel.applyParsedCssToChain=function(q,j){if(a.Util.isArray(q)==false){throw new Error("Invalid parsed CSS array!")}function s(w){var t=w.toFullSelectorString(true).split(" "),v=false;for(var x=0;x<q.length;x++){var z=q[x],A=z.classNames||[];if(k(t,A)){v=true;break}}if(!v){z=n(t)}else{}var y=l[z.classNames.join(" ")];if(y&&y[0]){z.queryStyle=y[0].subStyle}else{var u={query:"@media screen and (-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 1.5dppx)",subStyles:[{classNames:t,attributes:{},comments:"/* Added by Viewer Preset Editor */",added:true}]};z.queryStyle=u.subStyles[0];q.push(u)}o(z,m);w.setParsedCSS(z)}function g(v,u){var t=[];v.forEach(function(w){if(u.indexOf(w)!==-1){t.push(w)}});return t}function h(t){return t.match(/([#\.a-zA-Z\[][a-zA-Z0-9\_\]'\"\=]*)/g)}function i(t){return(h(t)||[]).sort().reverse().join("")}function p(t){var u=(t.classNames||[]);if(!u.length){return""}return i(u[u.length-1])}function r(u){var t=u.filter(function(v){return(v.classNames&&v.classNames.length)});return t.sort(function(w,v){function x(y,z){return y+(h(z)||[]).length}return w.classNames.reduce(x,0)-v.classNames.reduce(x,0)})}function o(u,t){t.forEach(function(z){var x,v,w,y,A;if(z.classNames.length>u.classNames.length||z===u){w=false}else{for(x=0,v=0;x<u.classNames.length&&v<z.classNames.length;x++){y=h(u.classNames[x]);A=h(z.classNames[v]);if(g(y,A).length===A.length){v++}}w=(v===z.classNames.length&&x===u.classNames.length)}if(w){u.cascaded=a.Util.merge(u.cascaded||{},z.attributes)}})}function k(v,u){var t=(v.length===u.length),w;for(w=0;t&&w<v.length;w++){t=(v[w]===u[w])}return t}function f(v){var t={};var u=v.filter(function(w){return(w.subStyles&&w.subStyles.length)});u.forEach(function(w){w.subStyles.forEach(function(y){var x=y.classNames.join(" ");t[x]=(t[x]||[]);t[x].push({subStyle:y,queryObject:w})})});return t}function n(t){var u={classNames:t,attributes:{},comments:"/* Added by Viewer Preset Editor */",added:true};q.push(u);return u}var m=r(q);var l=f(q);j.traverseTree(function(t){if(t.name==="Marker"){return}s(t);t.initPropertyModels()})};a.model.SelectorModel.prototype.notifyAll=function(){for(var f in this.properties){if(this.properties.hasOwnProperty(f)){this.notifyPropertyChanged(f,null,this.properties[f])}}};a.model.SelectorModel.prototype.addChildNode=function(f){if(f instanceof a.model.SelectorModel===false){throw new Error("Object must be a SelectorModel subclass!")}return this.childNodes.push(f)};a.model.SelectorModel.prototype.getName=function(){return this.name||this.toFullSelectorString()};a.model.SelectorModel.dirtyProps={};a.model.SelectorModel.logIndex=0;a.model.SelectorModel.prototype.propertyModelChanged=function(n,f,h){var m=this.properties[n],j=this.sdkClassName?("."+this.sdkClassName):this.toFullSelectorString(),l=j+":"+n,g=h.set,i=this.toFullSelectorString(true),k=false;if(h instanceof a.css.Property===false){return}if(h instanceof a.css.Property===false){return}else{if(!m){}else{if(m&&m.equal&&m.equal(h)||m===h){return}}}this.properties[n]=h.clone();if(!h.inherited&&h.set){if(n.match(/retina-/)&&this.getParsedCSS().queryStyle){this.getParsedCSS().queryStyle.attributes[n.replace(/retina-/,"")]=h.value}else{this.getParsedCSS().attributes[n]=h.cssValue()}}if(this.component&&h&&g){k=Boolean(a.model.SelectorModel.globalPropertyPipe(n,f,h,this));if(!k&&this.component.setCSS&&(!n.match(/background/)||this.component.getClassName()==="ImageMapEffect")){this.component.setCSS(j,n,h.cssValue())}else{}}this.notifyPropertyChanged(n,f,h)};a.model.SelectorModel.prototype.lowerSpecificitySelectorModelChanged=function(h,f,i){var g=this.properties[h];if(i&&!(i instanceof a.css.Property)){return}else{if(g&&g.equal&&g.equal(i)||g===i){return}}if(g&&(g.set||g.fromCss)){return}i=i.clone({inherited:true,set:false,active:false,fromCss:false});this.properties[h]=i.clone?i.clone():i;this.notifyPropertyChanged(h,f,i)}}if(!a.model.ClassSelectorModel){a.model.ClassSelectorModel=function b(h,g,f,k,i,j){a.model.ClassSelectorModel.superclass.apply(this,[h,g,f,k,i]);if(a.Util.isString(j)===false){throw new Error("Invalid 'className' parameter. Expected string!")}this.specificity=new a.model.SelectorModel.Specificity(0,1,0);this.className=j.trim()};a.Class.inherits("s7sdk.model.ClassSelectorModel","s7sdk.model.SelectorModel");a.model.ClassSelectorModel.prototype.toClassString=function(){return"."+this.className};a.model.ClassSelectorModel.prototype.toSelectorString=function(){return this.combinator+this.toClassString()}}if(!a.model.AttributeSelectorModel){a.model.AttributeSelectorModel=function e(i,h,g,l,j,f,k){a.model.AttributeSelectorModel.superclass.apply(this,[i,h,g,l,j]);if(a.Util.isString(f)===false||a.Util.isString(k)===false){throw new Error("Invalid 'attributeName' or 'attributeValue' parameter. Expected strings!")}this.specificity=new a.model.SelectorModel.Specificity(0,1,0);this.attributeName=f.trim();this.attributeValue=k.trim()};a.Class.inherits("s7sdk.model.AttributeSelectorModel","s7sdk.model.SelectorModel");a.model.AttributeSelectorModel.prototype.toSelectorString=function(){return this.combinator+this.toAttrString()};a.model.AttributeSelectorModel.prototype.toAttrString=function(){var f="";if(this.attributeName&&this.attributeValue){f="["+this.attributeName+"='"+this.attributeValue+"']"}return f}}if(!a.model.SelectorModel.Specificity){a.model.SelectorModel.Specificity=function c(g,f,h){this.a=Number(g)||0;this.b=Number(f)||0;this.c=Number(h)||0};a.model.SelectorModel.Specificity.prototype.tallyA=function(){this.a+=1};a.model.SelectorModel.Specificity.prototype.tallyB=function(){this.b+=1};a.model.SelectorModel.Specificity.prototype.tallyC=function(){this.c+=1};a.model.SelectorModel.Specificity.prototype.equal=function(f){return(this.a==f.a)&&(this.b==f.b)&&(this.c==f.c)};a.model.SelectorModel.Specificity.prototype.greaterThan=function(g){var h=[this.a-g.a,this.b-g.b,this.c-g.c],f;for(f=0;h[f]==0&&f<h.length-1;f+=1){}return(h[f]>0)};a.model.SelectorModel.Specificity.prototype.lessThan=function(f){return !(this.equal(f)||this.greaterThan(f))};a.model.SelectorModel.Specificity.prototype.add=function(f){return new a.model.SelectorModel.Specificity(this.a+f.a,this.b+f.b,this.c+f.c)};a.model.SelectorModel.Specificity.prototype.clone=function(){return new a.model.SelectorModel.Specificity(this.a,this.b,this.c)};a.model.SelectorModel.Specificity.prototype.toString=function(){return[this.a,this.b,this.c].join("-")}}}(s7getCurrentNameSpace()));