/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.set");b.Util.require("s7sdk.common.Geometry");b.Util.require("s7sdk.common.ItemDesc");b.Util.require("s7sdk.common.IS");b.Util.require("s7sdk.event.Event");if(!b.set.PageScrubberControl){b.set.PageScrubberControl=function(c){arguments.callee.superclass.apply(this,[c,b.set.PageScrubberControl.NS,c.constructor,b.set.PageScrubber.RESTRICTED_STYLES])};b.set.PageScrubberControl.NS="s7sdk.set.PageScrubberControl";b.set.PageScrubberControl.prototype.rebuild=function(e){var d=new b.Point2D(this.component.currentMousePoint.x,this.component.currentMousePoint.y);var c=this.component.pageIndex;this.superproto.rebuild.apply(this,[e]);this.component.setCurrentMousePoint(d);this.component.adjustTrackPos();this.component.pageIndex=c}}b.Class.inherits(b.set.PageScrubberControl.NS,"s7sdk.ControlComponent");if(!b.set.PageScrubber){b.set.PageScrubber=function PageScrubber(d,f,e){var h=!!arguments[3];this.splitFrames={orientation:false};e=(typeof e=="string"&&e.length)?e:"PageScrubber_"+b.Util.createUniqueId();b.Logger.log(b.Logger.CONFIG,"s7sdk.set.PageScrubber constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,"div","s7pagescrubber",f,!h]);this.createElement();this.container=this.getParent();this.attachToContainer();this.wid=undefined;this.hei=undefined;this.scrubberOffset=0;this.track=null;this.dragButton=null;this.mediaSet=null;this.logicalPage=0;this.prevPage=-1;this.pageCount=0;this.calculatedStyles={};this.pageIndex=1;this.pageData=[];this.pageTicks=[];this.locale=this.getParam("locale","");this.okToShowImage=false;var c=this;this.__mouseDown=function(j){c.mouseDown(j)};this.__mouseMove=function(j){c.mouseMove(j)};this.__mouseUp=function(j){c.mouseUp(j)};this.__trackClick=function(j){c.trackClick(j)};this.mouseIsDown=false;this.maxldradius=parseInt(this.maxloadradius);this.preloadImg=(this.pagethumb=="image")&&this.maxldradius>=0;if(this.preloadImg){this.delay=50;this.queue=new Array();this.timer=setInterval(b.Util.wrapContext(this.onProcess,this),this.delay)}this.parseSettings();var g=parseInt(b.Util.css.getCss("s7pagescrubber","width",e,null,this.getParent()));var i=parseInt(b.Util.css.getCss("s7pagescrubber","height",e,null,this.getParent()));this.resize(g,i);if(!h){return new b.set.PageScrubberControl(this)}else{return this}};b.Class.inherits("s7sdk.set.PageScrubber","s7sdk.UIComponent");b.set.PageScrubber.prototype.getComponent=function(){return this};b.set.PageScrubber.prototype.modifiers={serverUrl:{params:["serverUrl"],defaults:["/is/image/"]},asset:{params:["imageSet"],defaults:[""]},aemmode:{params:["value"],defaults:[false],ranges:[[true,false]]},maxloadradius:{params:["value"],defaults:[1],ranges:["-1:"]},iscommand:{params:["value"],defaults:[""],parseParams:false},pagethumb:{params:["pagethumb"],defaults:["label"],ranges:[["none","label","image","singlepage","doublepage"]]},direction:{params:["direction"],defaults:["auto"],ranges:[["auto","left","right"]]},aligntotick:{params:["aligntotick"],defaults:[false]}};b.set.PageScrubber.prototype.symbols={PAGE_THUMB_TEXT:"Page"};b.set.PageScrubber.RESTRICTED_STYLES={s7pagescrubber:["width","height"],"s7pagescrubber s7track":["width","height"],"s7pagescrubber s7dragbutton":["width","height"],"s7pagescrubber s7bubble":["width","height","font-family","font-size","font-style"],"s7pagescrubber s7imgbubble":["width","height","font-family","font-size","font-style"]};b.set.PageScrubber.prototype.getMediaSet=function(){return this.mediaSet};b.set.PageScrubber.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(b.set.PageScrubber.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superproto.setCSS.apply(this,[e,d,c])}};b.set.PageScrubber.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (PageScrubber) is unsupported! Please refer to SDK documentation on using setModifier.")};b.set.PageScrubber.prototype.parseSettings=function(){if(this.serverUrl.lastIndexOf("/")!=(this.serverUrl.length-1)){this.serverUrl+="/"}this.bubbleDiv=null;this.bubbleText=null;this.bubbleImage=null;this.currentMousePoint=new b.Point2D(0,0);this.showtmb=(this.pagethumb=="none")?false:true;this.alignLeft=(this.direction=="auto"?(this.settings.locale!="ja"?true:false):(this.direction=="left"?true:false));this.build();if(this.asset!=""){this.setAsset(this.asset)}};b.set.PageScrubber.prototype.calculateStyle=function(d,c,e){if(this.calculatedStyles[e]==null){this.calculatedStyles[e]={}}this.calculatedStyles[e][d]=c;b.Logger.log(b.Logger.INFO,"s7sdk.set.PageScrubber.calculateStyle - property: %0 value %1",d,c)};b.set.PageScrubber.prototype.cleanUp=function(c){if(this.obj){b.Util.removeTags(this.obj);this.track=null;this.bubbleDiv=null;this.dragButton=null}this.obj.style.cssText=""};b.set.PageScrubber.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};b.set.PageScrubber.prototype.loadAsset=function(){b.Logger.log(b.Logger.INFO,"s7sdk.set.PageScrubber.loadAsset");this.okToShowImage=false;var c=this.serverUrl+b.MediaSetParser.parseAssetForSetReq(this.asset).req;if(b.Util.isNonEmptyString(this.labelKey)){c+="&labelkey="+this.labelKey}if(b.Util.isNonEmptyString(this.locale)){c+="&locale="+this.locale}if(this.isReq){this.isReq.cancelHttpReq()}this.isReq_=new b.IS(this.serverUrl,this.asset);this.isReq_.getHttpReq(c,function(e,d){b.set.PageScrubber.prototype.setRequestComplete.apply(d,[e])},function(e,d){b.set.PageScrubber.prototype.setRequestError.apply(d,[e])},this)};b.set.PageScrubber.prototype.setRequestComplete=function(d){var c=d.set;if(c==null){return}var e=b.MediaSetParser.parse(c,"",this.aemmode,this.dir);this.updateLandscapeLabels(e," - ");this.cleanUp(true);this.setMediaSet(e);this.build()};b.set.PageScrubber.prototype.updateLandscapeLabels=function(d,g){var f=d.items;var e=d.type!==b.ItemDescType.ECAT_SET;g=g?g:" : ";for(var h=0;h<f.length;h++){var j=f[h];var c=j.label;var k=undefined;if(j.images){if(j.images[0].label){c=j.images[0].label}if(j.images[1]&&j.images[1].label){k=j.images[1].label}}j.label=c;if(j.np||e){if(!j.label){j.label=k?k:""}}else{if(j.label){j.label+=k?g+k:""}else{j.label=k?k:""}}if(!j.label){j.label=""}}};b.set.PageScrubber.prototype.getNextToLoad=function(){if(this.pageData.length==0){return}var d=this.pageIndex-1-this.maxldradius;var e=this.pageIndex+this.maxldradius;if(d<0){d=0}if(e>this.pageData.length-1){e=this.pageData.length}if(d==e){return this.pageData[d]}else{for(var c=d;c<e;c++){if(!this.pageData[c].isComplete){return this.pageData[c]}}}};b.set.PageScrubber.prototype.onProcess=function(){var d=new Array();for(var c=0;c<3;c++){var e=this.queue[c];if(e!=null&&!e.isComplete){d.push(e)}else{var e=this.getNextToLoad();if(e){e.loadImage();d.push(e)}}}this.queue=d};b.set.PageScrubber.prototype.setRequestError=function(c){b.Logger.log(b.Logger.WARNING,"s7sdk.set.PageScrubber.setRequestError - response: %0",c)};b.set.PageScrubber.prototype.build=function(){var f,d;if(!this.wid){f=parseInt(b.Util.css.getCss("s7track","width",this.id,"s7pagescrubber",this.container));this.wid=f}else{f=this.wid}if(!this.hei){d=parseInt(b.Util.css.getCss("s7pagescrubber","height",this.id,null,this.container));this.hei=d}else{d=this.hei}this.scrubberOffset=parseInt(b.Util.css.getCss("s7dragbutton","width",this.id,"s7pagescrubber",this.container))*0.5;this.imageWidth=b.Util.css.getCss("s7imgbubble","width",this.id,"s7pagescrubber",this.container);this.imageHeight=b.Util.css.getCss("s7imgbubble","height",this.id,"s7pagescrubber",this.container);var c=b.Util.createElement("div",{});c.className="s7track";this.track=c;if(this.wid>=0){f=this.wid;this.obj.style.width=this.formatValueForStyle(f);this.track.style.width=this.formatValueForStyle(f)}this.obj.style.height=this.formatValueForStyle(this.hei);this.dragBounds=new b.Point2D(f,d);var e=b.Util.createElement("div",{});this.dragButton=e;e.className="s7dragbutton";this.obj.appendChild(c);c.appendChild(e);this.addInteraction(e);b.Event.addDOMListener(c,"click",this.__trackClick,false);if(!this.alignLeft){this.currentMousePoint=new b.Point2D(this.dragBounds.x,this.dragBounds.y)}this.adjustTrackPos();if(this.showtmb){this.buildBubble()}};b.set.PageScrubber.prototype.addInteraction=function(c){b.Event.addDOMListener(c,"mousedown",this.__mouseDown,false);b.Event.addDOMListener(c,"touchstart",this.__mouseDown,false)};b.set.PageScrubber.prototype.setMediaSet=function(d){b.Logger.log(b.Logger.FINE,"s7sdk.set.PageScrubber.setMediaSet - mediaSet: %0",d);if(d!=null){var c=d;if(!(d instanceof b.OrientationSetDesc)){c=new b.OrientationSetDesc(c,null)}if(c.landscape==null||typeof(c.landscape.items[0])=="undefined"){return}this.mediaSet=c;this.currentAsset=c;this.createIndexTexts(" - ");this.setPages();if(this.showtmb){this.buildBubble()}}};b.set.PageScrubber.prototype.createIndexTexts=function(e){var d=this.mediaSet.landscape.items;var c=this.mediaSet.landscape.type!==b.ItemDescType.ECAT_SET;this.indexTextLandscape=[];var g=1;e=e?e:" - ";for(var f=0;f<d.length;f++){var h=d[f];this.indexTextLandscape[f]=g.toString();if(!(h.np||c)){g++;this.indexTextLandscape[f]+=e+g}g++}this.indexTextPortrait=[];if(this.mediaSet.portrait){d=this.mediaSet.portrait.items;for(var f=0;f<d.length;f++){this.indexTextPortrait[f]=(f+1).toString()}}};b.set.PageScrubber.prototype.setPages=function(){this.items=this.splitFrames.orientation?this.mediaSet.portrait.items:this.mediaSet.landscape.items;this.pageCount=this.items.length;this.buildPageData();this.buildTicks()};b.set.PageScrubber.prototype.setCurrentMousePoint=function(c){if(c){this.currentMousePoint=c}};b.set.PageScrubber.prototype.buildTicks=function(){var d=Math.ceil(this.dragBounds.x/this.pageCount);var e=[];for(var c=0;c<this.pageCount-1;c++){e.push(c*d+(c!=0?d/2:0))}e.push(this.dragBounds.x);this.pageTicks=e};b.set.PageScrubber.prototype.buildPageData=function(){var f=1;var j=this.getLocalizedText("PAGE_THUMB_TEXT");this.pageData=[];for(var e=0;e<this.pageCount;e++){var h={};var g="";var k=this.items[e];if(typeof(k.label)!="undefined"&&k.label!=""){g=k.label}else{g=j+" "+(this.splitFrames.orientation?this.indexTextPortrait[e]:this.indexTextLandscape[e])}var d=k.name;var c=this.generateImageUrl(d);h.text=g;h.image=c;h.isLoading=false;h.isComplete=false;h.loadImage=this.loadImage;h.owner=this;h.page=e;this.pageData.push(h);if(this.pagethumb=="image"&&!this.preloadImg){h.loadImage()}}if(!this.alignLeft){this.pageData.reverse();this.pageIndex=this.pageCount}};b.set.PageScrubber.prototype.generateImageUrl=function(c){var d=this.serverUrl;d+=c;if(d.indexOf("?")>-1){d+="&layer=comp&"}else{d+="?"}d+="hei="+parseInt(this.imageHeight);if(this.iscommand&&this.iscommand.length>0){d+="&"+unescape(this.iscommand)}if(b.Util.isNonEmptyString(this.locale)){d+="&locale="+this.locale}return d};b.set.PageScrubber.prototype.loadImage=function(){if(this.isLoading){return}var c=document.createElement("img");c.src=this.image;this.img_=c;var d=this;d.isLoading=true;if(d.img_.complete){d.isComplete=true;d.img_=null;d.owner.updateBubble(d)}else{c.onabort=c.onerror=c.onload=function(f){d.img_=null;d.isComplete=true;d.owner.updateBubble(d)}}};b.set.PageScrubber.prototype.trackClick=function(c){if(this.pageCount<=0){return}b.Event.preventDefault(c);b.Event.stopPropagation(c);var d=typeof(c.target)!="undefined"?c.target:c.srcElement;if(d==this.track){if(!this.okToShowImage){this.okToShowImage=true}this.proceedPositioning(c)}};b.set.PageScrubber.prototype.proceedPositioning=function(g){var c=b.Util.getObjPos(this.obj).x;var f=b.Util.getEventPos(g).x-(c);var e=b.Util.getEventPos(g).y;this.currentMousePoint=new b.Point2D(f,e);if(this.aligntotick){if((this.currentMousePoint.x-this.scrubberOffset)<=0){this.currentMousePoint.x=0}else{if(this.currentMousePoint.x>this.dragBounds.x){this.currentMousePoint.x=this.dragBounds.x-this.scrubberOffset}}}else{this.adjustTrackPos()}var d=Math.ceil(this.pageCount-((this.dragBounds.x-this.currentMousePoint.x)/this.dragBounds.x)*this.pageCount);d=(d>this.pageCount)?this.pageCount:(d<=0)?1:d;this.proceedPageset(d,false)};b.set.PageScrubber.prototype.proceedPageset=function(d,e){if(this.aligntotick||e){this.currentMousePoint.x=this.pageTicks[d-1];this.adjustTrackPos()}var c=d!=this.pageIndex;this.pageIndex=d;this.showBubble();var f=this;setTimeout(function(){if(f.showtmb){f.removeBubble()}},2000);(this.pagethumb=="image")?this.setImage():this.setText();this.logicalPage=this.pageData[this.pageIndex-1].page;if(c){this.dispatchEvent(new b.event.SliderEvent(b.event.SliderEvent.NOTF_SLIDER_MOVE,[this.logicalPage],false));this.dispatchEvent(new b.event.AssetEvent(b.event.AssetEvent.ITEM_SELECTED_EVENT,this.getLogicalCurrentAsset(),this.logicalPage,false))}};b.set.PageScrubber.prototype.mouseDown=function(f){if(this.pageCount<=0){return}f=f||window.event;b.Event.preventDefault(f);this.mouseIsDown=true;this.prevPage=this.logicalPage;if(!this.okToShowImage){this.okToShowImage=true}this.showBubble();var c=b.Util.getObjPos(this.obj).x;var e=b.Util.getEventPos(f).x-(c);var d=b.Util.getEventPos(f).y;this.currentMousePoint=new b.Point2D(e,d);b.Event.addDOMListener(document,"mousemove",this.__mouseMove,false);b.Event.addDOMListener(document,"mouseup",this.__mouseUp,false);b.Event.addDOMListener(document,"touchmove",this.__mouseMove,false);b.Event.addDOMListener(document,"touchend",this.__mouseUp,false);this.dispatchEvent(new b.event.SliderEvent(b.event.SliderEvent.NOTF_SLIDER_DOWN,[this.logicalPage],false))};b.set.PageScrubber.prototype.mouseMove=function(g){if(this.pageCount<=0){return}g=g||window.event;b.Event.preventDefault(g);var c=b.Util.getObjPos(this.obj).x;var f=b.Util.getEventPos(g).x-(c);var e=b.Util.getEventPos(g).y;this.adjustTrackPos();this.currentMousePoint=new b.Point2D(f,e);var d=Math.ceil(this.pageCount-((this.dragBounds.x-this.currentMousePoint.x)/this.dragBounds.x)*this.pageCount);d=(d>this.pageCount)?this.pageCount:(d<=0)?1:d;if(d!=this.pageIndex){this.pageIndex=d;(this.pagethumb=="image")?this.setImage():this.setText();this.logicalPage=this.pageData[this.pageIndex-1].page;this.dispatchEvent(new b.event.SliderEvent(b.event.SliderEvent.NOTF_SLIDER_MOVE,[this.logicalPage],false))}};b.set.PageScrubber.prototype.adjustTrackPos=function(){if((this.currentMousePoint.x-this.scrubberOffset)<=0){this.positionAt(0)}else{if(this.currentMousePoint.x>(this.dragBounds.x-this.scrubberOffset)){this.positionAt((this.dragBounds.x-(this.scrubberOffset*2)))}else{this.positionAt((this.currentMousePoint.x-this.scrubberOffset))}}};b.set.PageScrubber.prototype.setText=function(){if(typeof(this.bubbleText)=="undefined"||this.bubbleText==null){return}if(this.pageData[this.pageIndex-1]){var c=this.pageData[this.pageIndex-1].text;if(typeof(this.bubbleText.textContent)!="undefined"){this.bubbleText.textContent=c}else{this.bubbleText.nodeValue=c}}};b.set.PageScrubber.prototype.setImage=function(){if(typeof(this.bubbleImage)=="undefined"||this.bubbleImage==null){return}var c=this.pageData[this.pageIndex-1];if(c&&c.isComplete){this.bubbleImage.src=c.image;this.bubbleDiv.style.visibility="inherit"}else{this.bubbleDiv.style.visibility="hidden"}b.Logger.log(b.Logger.INFO,"s7sdk.set.PageScrubber.setImage - img: %0",c)};b.set.PageScrubber.prototype.updateBubble=function(c){if(this.bubbleImage&&((this.pageIndex-1)==c.page)){this.bubbleImage.src=c.image;if((this.bubbleDiv)&&(this.okToShowImage)){this.bubbleDiv.style.visibility="inherit"}else{if(this.bubbleDiv){this.bubbleDiv.style.visibility="hidden"}}}};b.set.PageScrubber.prototype.positionAt=function(c){b.Logger.log(b.Logger.FINE,"s7sdk.set.PageScrubber.positionAt - val: %0",c);this.dragButton.style.left=this.formatValueForStyle(c)};b.set.PageScrubber.prototype.buildBubble=function(){if((this.bubbleDiv)||!(this.dragButton)){return}this.bubbleDiv=b.Util.createElement("div",{});var e=(this.pagethumb=="image")?this.buildImageBubble():this.buildTextBubble();this.bubbleDiv.appendChild(e);this.bubbleDiv.className=(this.pagethumb=="image")?"s7imgbubble":"s7bubble";var d=".s7bubble";if(this.bubbleDiv.className=="s7imgbubble"){d=".s7imgbubble"}for(var c in this.calculatedStyles[".s7pagescrubber "+d]){this.bubbleDiv.style[c]=this.calculatedStyles[".s7pagescrubber "+d][c]}this.dragButton.appendChild(this.bubbleDiv);if(this.pagethumb=="image"){this.setImage()}else{this.setText()}this.bubbleDiv.style.visibility="hidden"};b.set.PageScrubber.prototype.showBubble=function(){if(this.bubbleDiv){this.bubbleDiv.style.visibility="inherit";this.setText()}};b.set.PageScrubber.prototype.hideBubble=function(){if(this.bubbleDiv){this.bubbleDiv.style.visibility="hidden"}};b.set.PageScrubber.prototype.buildTextBubble=function(){var c=document.createTextNode("");this.bubbleText=c;return c};b.set.PageScrubber.prototype.buildImageBubble=function(){var c=document.createElement("img");this.bubbleImage=c;return c};b.set.PageScrubber.prototype.formatValueForStyle=function(d){var c=d.toString();if((c.lastIndexOf("px")!=-1)&&(c.lastIndexOf("px")==(c.length-2))){return c}else{return c+"px"}};b.set.PageScrubber.prototype.removeBubble=function(){this.hideBubble()};b.set.PageScrubber.prototype.mouseUp=function(e){e=e||window.event;b.Event.preventDefault(e);this.mouseIsDown=false;if(this.showtmb){this.removeBubble()}b.Event.removeDOMListener(document,"mousemove",this.__mouseMove,false);b.Event.removeDOMListener(document,"mouseup",this.__mouseUp,false);b.Event.removeDOMListener(document,"touchmove",this.__mouseMove,false);b.Event.removeDOMListener(document,"touchend",this.__mouseUp,false);if(this.prevPage!=this.logicalPage){this.dispatchEvent(new b.event.SliderEvent(b.event.SliderEvent.NOTF_SLIDER_UP,this.logicalPage,false));this.dispatchEvent(new b.event.AssetEvent(b.event.AssetEvent.ITEM_SELECTED_EVENT,this.getLogicalCurrentAsset(),this.logicalPage,false));this.prevPage=this.logicalPage}if(this.aligntotick){this.proceedPositioning(e)}else{var g=/.*[^px]/;var d=this.dragButton.style.left;var c=g.exec(d);var f=this.dragButton.offsetWidth*0.5;if(c.length>0){this.currentMousePoint.x=(parseInt(c[0])+f)}}};b.set.PageScrubber.prototype.setPortrait=function(){this.setSplitFrames(true)};b.set.PageScrubber.prototype.setLandscape=function(){this.setSplitFrames(false)};b.set.PageScrubber.prototype.setSplitFrames=function(e){if(this.splitFrames.orientation==e){return e}if(this.mediaSet.portrait==null){this.splitFrames.orientation=false;return false}this.splitFrames.orientation=e;if(this.mediaSet){this.orientationChanged=true;this.items=e?this.mediaSet.portrait.items:this.mediaSet.landscape.items;var c=this.getCurrentFrameIndex();var d=e?this.mediaSet.getPortraitIndex(c):this.mediaSet.getLandscapeIndex(c);this.setPages();this.setCurrentFrameIndex(d)}return e};b.set.PageScrubber.prototype.getLogicalCurrentAsset=function(){var d=this.items;var c=d[this.logicalPage];return c};b.set.PageScrubber.prototype.setAsset=function(e){if(typeof e!="string"){throw new Error("Asset name must be represented by a string!")}b.Logger.log(b.Logger.FINE,"s7sdk.set.PageScrubber.setAsset - asset: %0",e);var c=unescape(e);this.currentAsset=e;if(this.asset!=null&&c!=this.asset){var d=new b.UserEvent(b.UserEvent.SWAP,[0,e],true);b.Event.dispatch(this.obj,d,false)}this.asset=c;this.loadAsset()};b.set.PageScrubber.prototype.addEventListener=function(e,d,c){b.Logger.log(b.Logger.FINE,"s7sdk.set.PageScrubber.addEventListener - type: %0, handler: %1, useCapture: %2",e,d.toString().substring(0,d.toString().indexOf("(")),c);this.superproto.addEventListener.apply(this,[e,d,c])};b.set.PageScrubber.prototype.getWidth=function(){return this.wid};b.set.PageScrubber.prototype.getHeight=function(){return this.hei};b.set.PageScrubber.prototype.resize=function(e,j){b.Logger.log(b.Logger.FINE,"s7sdk.set.PageScrubber.resize - w: %0, h: %1",e,j);var d=(this.wid==0)?this.dragBounds.x:this.wid;var f=(e<this.wid);var g=Math.abs((d-e)/d);var i=(this.currentMousePoint.x<0)?0:this.currentMousePoint.x;var c=Math.round((i*g));if(!f){c=i+c}else{c=Math.abs(i-c)}this.wid=(e);this.hei=j;this.cleanUp(true);this.build();this.buildTicks();this.logicalPage=0;this.currentMousePoint.x=c;this.adjustTrackPos()};b.set.PageScrubber.prototype.getCurrentFrameIndex=function(){return this.logicalPage};b.set.PageScrubber.prototype.setCurrentFrameIndex=function(d){var c=parseInt(d);if(this.logicalPage==c){return}if(c<0||c>(this.pageCount-1)){return}if(!this.alignLeft){c=this.pageCount-c-1}this.proceedPageset(c+1,true)};b.set.PageScrubber.prototype.getCurrentAsset=function(){return typeof this.currentAsset=="undefined"?null:this.currentAsset};b.set.PageScrubber.prototype.setCurrentAsset=function(c){if(typeof(c)=="string"){this.setAsset(c)}else{this.setMediaSet(c)}};(function a(){var g=b.Util.css.createCssRuleText;var h=b.Util.css.createCssImgUrlText;var j=b.Util.css.createCssAnimationText;var n=b.browser&&b.browser.name=="ie"&&b.browser.version.major>=10;var l={background:"#49494A",position:"absolute",left:"-38px",top:"-30px",width:"100px",height:"26px","border-radius":"6px","text-align":"center","font-family":"Arial","font-size":"14px","line-height":"25px","word-wrap":"normal","white-space":"nowrap","overflow-wrap":"none","text-wrap":"none"};var i={background:"#49494A",position:"absolute","border-radius":"5px","text-align":"center","font-family":"Arial","font-size":"14px","line-height":"25px","word-wrap":"normal","white-space":"nowrap","overflow-wrap":"none","text-wrap":"none",width:"160px",height:"100px",top:"-115px",left:"-73px",padding:"5px"};var m={background:"#49494A",height:"24px",width:"24px","-moz-border-radius":"12px","-webkit-border-radius":"12px","border-radius":"12px",position:"absolute",top:"-4px",left:"0px",color:"white"};var d={width:"700px",height:"16px","text-align":"center","background-color":"#E5E5E8",position:"absolute",bottom:"0px","-moz-border-radius":"8px","-webkit-border-radius":"8px","border-radius":"8px"};var p={width:"700px",height:"100px",position:"absolute","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-ms-touch-action":n?"none":"","touch-action":n?"none":""};var k=g(".s7pagescrubber",p);var f=g(".s7pagescrubber .s7track",d);var o=g(".s7pagescrubber .s7dragbutton",m);var c=g(".s7pagescrubber .s7bubble",l);var e=g(".s7pagescrubber .s7imgbubble",i);b.Util.css.addDefaultCSS(k+f+o+c+e,"PageScrubber")})()}})(s7getCurrentNameSpace());