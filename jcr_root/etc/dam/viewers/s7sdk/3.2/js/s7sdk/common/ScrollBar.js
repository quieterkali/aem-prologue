/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.Util.require("s7sdk.common.Button");b.Util.require("s7sdk.event.Event");if(!b.ScrollBar){b.ScrollBar=function ScrollBar(c,e,d){arguments.callee.superclass.apply(this,[d,c,"div","s7scrollbar",e]);this.maxScroll_=1;this.createElement();this.build()};b.Class.inherits("s7sdk.ScrollBar","s7sdk.UIComponent");b.ScrollBar.prototype.getIntFromStyle=function(f,c,e){var d=parseInt(b.Util.getStyle(f,c));return b.Util.isNumber(d)?d:e};b.ScrollBar.prototype.getThumbMovingDistance=function(){return this.getTrackHeight()-this.thumb_.obj.offsetHeight};b.ScrollBar.prototype.getTrackHeight=function(){var c=parseInt(this.downButton_.getObj().offsetTop)-(parseInt(this.upButton_.getObj().offsetTop)+this.upButton_.getObj().offsetHeight+this.getIntFromStyle(this.track_.obj,"border-top-width",0)+this.getIntFromStyle(this.track_.obj,"border-bottom-width",0));return c<0?0:c};b.ScrollBar.prototype.layoutControls=function(){this.track_=new b.UIComponent(null,this.obj.id,"div","s7scrolltrack",null);this.track_.createElement();this.track_.obj.style.position="absolute";this.track_.obj.style.backgroundRepeat="no-repeat";this.track_.obj.style.backgroundPosition="center";this.obj.appendChild(this.track_.obj);this.upButton_=new b.ScrollUpButton(this.obj.id,this.settings,null,true);this.upButton_.getObj().style.position="absolute";this.downButton_=new b.ScrollDownButton(this.obj.id,this.settings,null,true);this.downButton_.getObj().style.position="absolute";this.thumb_=new b.ScrollBarThumb(this.obj.id,this.settings);this.thumb_.obj.style.top=this.upButton_.getObj().offsetTop+this.upButton_.getObj().offsetHeight+"px";this.track_.obj.style.top=this.thumb_.obj.style.top;this.screenStartY_=b.Util.getObjPos(this.track_.obj).y;var d=this.getTrackHeight();if(d<=0){this.downButton_.getObj().style.bottom=0+"px";d=this.getTrackHeight()}this.track_.obj.style.height=this.getTrackHeight()+"px";this.obj.appendChild(this.thumb_.obj);this.thumb_.changeState(0);var c=this;this.__mouseDown=function(f){c.mouseDown(f)};this.__mouseMove=function(f){c.mouseMove(f)};this.__mouseUp=function(f){c.mouseUp(f)};b.Event.addDOMListener(this.thumb_.obj,"mousedown",this.__mouseDown,false);b.Event.addDOMListener(this.thumb_.obj,"touchstart",this.__mouseDown,false);this.downButton_.addEventListener("click",function(e){c.thumbStepMove(false)});this.upButton_.addEventListener("click",function(e){c.thumbStepMove(true)});b.Event.addDOMListener(this.track_.obj,"touchstart",function(e){c.mouseMoveTrack(e)},false);b.Event.addDOMListener(this.track_.obj,"click",function(e){c.mouseMoveTrack(e)},false)};b.ScrollBar.prototype.mouseDown=function(d){d=d||window.event;b.Event.preventDefault(d);var c=b.Util.getEventPos(d).y;this.mouseIsDown_=true;this.cursorStartStage_=c;b.Event.addDOMListener(document,"mousemove",this.__mouseMove,false);b.Event.addDOMListener(document,"mouseup",this.__mouseUp,false);b.Event.addDOMListener(document,"touchmove",this.__mouseMove,false);b.Event.addDOMListener(document,"touchend",this.__mouseUp,false);this.thumb_.changeState(1)};b.ScrollBar.prototype.mouseMoveTrack=function(d){d=d||window.event;b.Event.preventDefault(d);var c=b.Util.getEventPos(d).y-this.screenStartY_-this.thumb_.obj.offsetHeight/2;this.cursorStartStage_=b.Util.getEventPos(d).y;this.curPos_=c*this.maxScroll_/this.getThumbMovingDistance();this.setThumbPosition();this.thumb_.changeState(1)};b.ScrollBar.prototype.mouseMove=function(d){d=d||window.event;b.Event.preventDefault(d);var c=b.Util.getEventPos(d).y-this.cursorStartStage_;this.cursorStartStage_=b.Util.getEventPos(d).y;var f=b.Util.getObjPos(this.track_.obj).y;var e=this.curPos_>0&&this.curPos_<this.maxScroll_;c=(this.cursorStartStage_>f)&&(this.cursorStartStage_<(f+this.track_.obj.offsetHeight)||e)?c:0;this.curPos_+=c*this.maxScroll_/this.getThumbMovingDistance();this.setThumbPosition();this.thumb_.changeState(1)};b.ScrollBar.prototype.mouseUp=function(c){c=c||window.event;b.Event.preventDefault(c);this.mouseIsDown_=false;b.Event.removeDOMListener(document,"mousemove",this.__mouseMove,false);b.Event.removeDOMListener(document,"mouseup",this.__mouseUp,false);b.Event.removeDOMListener(document,"touchmove",this.__mouseMove,false);b.Event.removeDOMListener(document,"touchend",this.__mouseUp,false);this.thumb_.changeState(0)};b.ScrollBar.prototype.thumbStepMove=function(c){this.curPos_=this.curPos_+(c?-this.scrollStep_:this.scrollStep_);this.setThumbPosition()};b.ScrollBar.prototype.setThumbPosition=function(d){if(this.curPos_<=0){this.curPos_=0;if(this.upButton_.activated){this.upButton_.deactivate()}this.downButton_.activate()}else{if(this.curPos_>=this.maxScroll_){this.curPos_=this.maxScroll_;if(this.downButton_.activated){this.downButton_.deactivate()}this.upButton_.activate()}else{if(!this.downButton_.activated){this.downButton_.currentState=0;this.downButton_.activate()}if(!this.upButton_.activated){this.upButton_.currentState=0;this.upButton_.activate()}}}var c=this.getThumbMovingDistance()*this.curPos_/this.maxScroll_;this.thumb_.obj.style.top=(this.track_.obj.offsetTop+c)+"px";if(this.prevPos!=this.curPos_){this.prevPos=this.curPos_;if(!d){this.dispatchEvent(new b.ScrollEvent(b.ScrollEvent.SCROLL_POSITION_EVENT,this.curPos_,true))}}};b.ScrollBar.prototype.build=function(){this.maxScroll_=2;this.curPos_=0;this.scrollStep_=1;this.attachToContainer();this.layoutControls()};b.ScrollBar.prototype.addEventListener=function(e,d,c){this.superproto.addEventListener.apply(this,[e,d,c])};b.ScrollBar.prototype.resize=function(){this.track_.obj.style.height=this.getTrackHeight()+"px";if(this.prevHeight){this.curPos_=this.curPos_*this.getThumbMovingDistance()/this.prevHeight}else{this.curPos_=0}this.prevHeight=this.getThumbMovingDistance();this.setThumbPosition()};b.ScrollBar.prototype.setMaxScroll=function(c){this.curPos_=0;this.maxScroll_=c<=0?1:c;this.resize()};b.ScrollBar.prototype.setScrollStep=function(c){this.scrollStep_=c<1?1:c};b.ScrollBar.prototype.getNormalizedPosition=function(){return this.curPos_/this.maxScroll_};b.ScrollBar.prototype.setNormalizedPosition=function(c){this.curPos_=c*this.maxScroll_;this.setThumbPosition(false);this.thumb_.obj.style.visibility="inherit"};b.ScrollBar.prototype.setPosition=function(c){if(!this.mouseIsDown_){this.curPos_=c;this.setThumbPosition(true)}};b.ScrollBar.prototype.getPosition=function(){return this.curPos_};b.ScrollBar.prototype.show=function(c){this.obj.style.visibility=c?"inherit":"hidden"};(function a(){var h=b.Util.css.createCssRuleText;var e=b.Util.css.createCssImgUrlText;var f=b.browser&&b.browser.name=="ie"&&b.browser.version.major<=8;var d=b.browser&&b.browser.name=="ie"&&b.browser.version.major>=10;var g={display:"block",width:"28px",height:"32px"};var c=h(".s7scrollbar",{"background-color":f?"rgb(224, 224, 224)":"rgba(102, 102, 102, 0)",top:"8px",bottom:"8px",right:"8px",width:"28px","-ms-touch-action":d?"none":"","touch-action":d?"none":""})+h(".s7scrollbar .s7scrollthumb",{width:"28px",position:"absolute","background-repeat":"no-repeat","background-position":"center","padding-top":"10px","padding-bottom":"10px",height:"45px"})+h(".s7scrollbar .s7scrollthumb[state='up']",{"background-image":e("scrollbar_thumb_up.png")})+h(".s7scrollbar .s7scrollthumb[state='over']",{"background-image":e("scrollbar_thumb_over.png")})+h(".s7scrollbar .s7scrollthumb[state='down']",{"background-image":e("scrollbar_thumb_down.png")})+h(".s7scrollbar .s7scrollthumb[state='disabled']",{"background-image":e("scrollbar_thumb_up.png")})+h(".s7scrollbar .s7scrolltrack",{width:"28px","background-color":"rgba(102, 102, 102, 0.5)"})+h(".s7scrollbar .s7scrollupbutton",g)+h(".s7scrollbar .s7scrollupbutton[state='up']",{"background-image":e("scroll_up_up.png")})+h(".s7scrollbar .s7scrollupbutton[state='over']",{"background-image":e("scroll_up_over.png")})+h(".s7scrollbar .s7scrollupbutton[state='down']",{"background-image":e("scroll_up_down.png")})+h(".s7scrollbar .s7scrollupbutton[state='disabled']",{"background-image":e("scroll_up_up.png")})+h(".s7scrollbar .s7scrolldownbutton",g)+h(".s7scrollbar .s7scrolldownbutton[state='up']",{"background-image":e("scroll_down_up.png")})+h(".s7scrollbar .s7scrolldownbutton[state='over']",{"background-image":e("scroll_down_over.png")})+h(".s7scrollbar .s7scrolldownbutton[state='down']",{"background-image":e("scroll_down_down.png")})+h(".s7scrollbar .s7scrolldownbutton[state='disabled']",{"background-image":e("scroll_down_up.png")});b.Util.css.addDefaultCSS(c,"ScrollBar")})()}if(!b.ScrollBarThumb){b.ScrollBarThumb=function ScrollBarThumb(d,f,e){arguments.callee.superclass.apply(this,[e,d,"div","s7scrollthumb",f]);this.createElement();var c=this;this.addEventListener("mouseover",function(g){c.changeState(2)});this.addEventListener("mouseout",function(g){c.changeState(0)})};b.Class.inherits("s7sdk.ScrollBarThumb","s7sdk.UIComponent");b.ScrollBarThumb.prototype.changeState=function(c){if(this.curState==c){return}var d=["up","down","over","disabled"];b.Util.css.setCSSAttributeSelector(this.obj,"state",d[c]);this.curState=c}}})(s7getCurrentNameSpace());